<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Home</title>
    <link rel="stylesheet" href="app.css" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-Zenh87qX5JnK2Jl0vWa8Ck2rdkQ2Bzep5IDxbcnCeuOxjzrPF/et3URy9Bv1WTRi"
      crossorigin="anonymous"
    />
  </head>
  <body>
    <div class="buttons">
      <a class="btn btn-info" href="submit.html">Form Submission</a>
    </div>

    <div class="data">
      <table class="table table-striped table-hover">
        <thead>
          <tr>
            <th scope="col">#</th>
            <th scope="col">Name</th>
            <th scope="col">Email</th>
            <th scope="col">Country</th>
            <th scope="col">Gender</th>
          </tr>
        </thead>
        <tbody>
          
          </tbody>
      </table>
    </div>

    <script>
        // Create an XMLHttpRequest object
const xhttp = new XMLHttpRequest();

const url = "http://127.0.0.1:8000/api/show";

// Define a callback function
xhttp.onload = function() {
// Here you can use the Data
if (this.readyState == 4 && this.status == 200) {
  var returnObj = JSON.parse(this.responseText);
  var tbody  =  document.querySelector("tbody");
  
  
  console.log(returnObj);


  for(var i=0;i<returnObj.length;i++)
        {
        	var tr = document.createElement("tr");
            var td0 = document.createElement("td");
            var td1 = document.createElement("td");
            var td2 = document.createElement("td");
            var td3 = document.createElement("td");
            var td4 = document.createElement("td");

            td0.innerHTML = returnObj[i].name;
            td1.innerHTML = returnObj[i].email;
            td2.innerHTML = returnObj[i].country;
            td3.innerHTML = returnObj[i].gender;
            td4.innerHTML = (i+1);

            tbody.append(tr);
            tr.append(td4);
            tr.append(td0);
            tr.append(td1);
            tr.append(td2);
            tr.append(td3);

        }

}
}

// Send a request
xhttp.open("GET", url, true);
xhttp.send();

      </script>


  </body>
</html>
